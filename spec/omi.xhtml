<?xml version='1.0'?>
<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml'>
	<head>
		<link rel='stylesheet' href='omi.css'/>
	</head>
	<body>
		<h1><abbr title='Open Sound Control'>OSC</abbr> Musical Interface</h1>
		<p class='work-in-progress'>
			Work in progress
		</p>
		<p>Version 0.1.</p>
		<p>
			This document specifies musical instrument control protocol transported over Open Sound Control 1.0.
		</p>
		<p>Authors: <a href='http://mcv.mulabs.org/'>Michał Gawron</a></p>
		<section>
			<h1>Introduction</h1>
			<p>
				OMI is meant to be more flexible than <abbr title='Musical Instrument Digital Interface'>MIDI</abbr>.
				It uses modern <a href='http://opensoundcontrol.org/'>Open Sound Control 1.0</a> as a transport layer,
				and allows duplex communication between two OMI endpoints, provided that transport for OSC (typically
				TCP/IP or UDP/IP) allows duplex connections.
			</p>
			<p class='todo'>Key features:</p>
			<ul>
				<li>Accurate parameter control (32-bit float value vs. MIDI's 7-bit integer).</li>
				<li>Enumerated parameters (switches, drop-down controllers).</li>
				<li>Support for feature-rich controllers (with LCD screens, etc).</li>
				<li>Support for multitouch-devices (Haken Continuum, Morphwiz, etc).</li>
			</ul>
			<p>
				This specification describes a set of modules, that can be implemented independently of each other.
			</p>
			<p class='todo'>Problems to be addressed: tuning (440Hz or other?)</p>
		</section>
		<section>
			<h1>Data types</h1>
			<p>This specification assumes that you're familiar with OSC 1.0.</p>
			<p>All data types used in this document correspond to basic OSC-defined data types. For convenience shorter names are used:</p>
			<table>
				<thead>
					<tr>
						<th scope='col'>OMI data type</th>
						<th scope='col'>OSC data type</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td><code>int</code></td>
						<td><code>int32</code></td>
					</tr>
					<tr>
						<td><code>float</code></td>
						<td><code>float32</code></td>
					</tr>
					<tr>
						<td><code>string</code></td>
						<td><code>OSC-string</code></td>
					</tr>
					<tr>
						<td><code>blob</code></td>
						<td><code>OSC-blob</code></td>
					</tr>
				</tbody>
			</table>
		</section>
		<section>
			<h1>Controller-to-instrument protocol</h1>
			<section>
				<h1>Keyboard control</h1>
				<p>Problems to be addressed: support for multitouch devices; different tunings; poly-parameters</p>
				<p class='todo'>Rationale: …</p>
				<section>
					<h1><span class='osc-message'>/note/on (voice-id, frequency)</span></h1>
					<dl class='parameters'>
						<dt><code>voice-id: int</code></dt>
						<dd>
							Unique voice identifier, allocated by the controller.
							If the voice with given <code>voice-id</code> isn't yet sounding in the instrument, it's created.
							Otherwise its <code>frequency</code> attribute is updated.
						</dd>
						<dt><code>frequency: float</code></dt>
						<dd>Voice frequency expressed in Hertz.</dd>
					</dl>
				</section>
				<section>
					<h1><span class='osc-message'>/note/key-on (voice-id, key-number)</span></h1>
				</section>
				<ul>
					<li>/note/panic</li>
				</ul>
				<p class='todo'></p>
			</section>
			<section>
				<h1>Parameter control</h1>
				<ul>
					<li>/parameter/set-mono (MIDI control-change, MIDI channel-pressure)</li>
					<li>/parameter/set-poly (MIDI key-pressure)</li>
					<li>/parameter/updated-list</li>
				</ul>
				<p class='todo'></p>
			</section>
			<section>
				<h1>Machine control</h1>
				<ul>
					<li>/transport/play</li>
					<li>/transport/pause</li>
					<li>/transport/fast-forward</li>
					<li>/transport/rewind</li>
					<li>/transport/stop</li>
					<li>/transport/record</li>
					<li>/transport/arm-record</li>
					<li>/transport/loop</li>
					<li>/transport/set-head-position</li>
				</ul>
				<p class='todo'></p>
			</section>
			<section>
				<h1>Synchronization</h1>
				<ul>
					<li>/sync/set-bpm</li>
					<li>/sync/clock</li>
				</ul>
				<p class='todo'></p>
			</section>
			<section>
				<h1>Preset change</h1>
				<ul>
					<li>/preset/updated-list</li>
				</ul>
				<p class='todo'></p>
			</section>
		</section>
		<section>
			<h1>Instrument-to-controller protocol</h1>
			<section>
				<h1>List of parameters</h1>
				<ul>
					<li>list-parameters</li>
				</ul>
				<p>Parameter consists of:</p>
				<ul>
					<li>id: string</li>
					<li>title: string</li>
					<li>description: string</li>
					<li>minimum-value: float</li>
					<li>maximum-value: float</li>
					<li>enumerated-values: ...</li>
					<li>default-value</li>
					<li>hint: string (pitchbend, sustain, sostenuto, soft-pedal, expression, …)</li>
				</ul>
				<p class='todo'></p>
			</section>
			<section>
				<h1>Controlling device's UI (LCD screens, etc)</h1>
				<p class='todo'></p>
			</section>
			<section>
				<h1>MIDI comparison</h1>
				<p>
					Channel pressure = /controller/poly-set
				</p>
				<p class='todo'></p>
			</section>
		</section>
		<section>
			<h1>Devices discovery</h1>
			<p>Problems to address: auto device discoverability (should be different specification probably); parameters list change; patches list change</p>
			<p class='todo'></p>
		</section>
	</body>
</html>
